# kintone ç™ºæ³¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**å¯¾è±¡**: ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã€é–‹ç™ºè€…  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**æœ€çµ‚æ›´æ–°**: 2026å¹´2æœˆ14æ—¥

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#1-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
2. [å°å…¥ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#2-å°å…¥ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
3. [JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ](#3-javascriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ)
4. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#4-ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
5. [ä¸»è¦å‡¦ç†ãƒ•ãƒ­ãƒ¼](#5-ä¸»è¦å‡¦ç†ãƒ•ãƒ­ãƒ¼)
6. [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•](#6-ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•)
7. [ä¿å®ˆãƒ»é‹ç”¨](#7-ä¿å®ˆé‹ç”¨)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#8-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 1.1 å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              kintone Platform                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ç™ºæ³¨ç®¡ç†   â”‚  â”‚è¦‹ç©ç®¡ç†   â”‚  â”‚ãƒã‚¹ã‚¿ç¾¤   â”‚     â”‚
â”‚  â”‚App       â”‚  â”‚App       â”‚  â”‚Apps      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â”‚             â”‚             â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         JavaScript Customization      â”‚     â”‚
â”‚  â”‚  - 10 Modules (120KB)                 â”‚     â”‚
â”‚  â”‚  - Custom CSS (916 lines)             â”‚     â”‚
â”‚  â”‚  - Event Handlers & Business Logic    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   External Systems  â”‚
â”‚  - ERP (CSV Export) â”‚
â”‚  - Reporton Plugin  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ç”¨é€” |
|---------|------|------|
| **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ** | kintone | ã‚¯ãƒ©ã‚¦ãƒ‰DBãƒ»ã‚¢ãƒ—ãƒªåŸºç›¤ |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Vanilla JavaScript (ES5+) | ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼å®Ÿè£… |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | CSS3 | UI/UX ãƒ‡ã‚¶ã‚¤ãƒ³ |
| **ãƒ‡ãƒ¼ã‚¿å‡¦ç†** | kintone REST API | ãƒ¬ã‚³ãƒ¼ãƒ‰CRUDæ“ä½œ |
| **å¤–éƒ¨é€£æº** | CSV Export | ERPé€£æº |

### 1.3 ã‚¢ãƒ—ãƒªæ§‹æˆ

#### ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒª

**App ID**: æœªè¨­å®šï¼ˆç’°å¢ƒä¾å­˜ï¼‰  
**ç›®çš„**: ç™ºæ³¨æ›¸ã®ä½œæˆãƒ»ç®¡ç†

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:

```javascript
// ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
po_number          // ç™ºæ³¨ç•ªå· (è‡ªå‹•æ¡ç•ª)
supplier_company   // ç™ºæ³¨å…ƒ
vendor             // ç™ºæ³¨å…ˆã‚³ãƒ¼ãƒ‰
vendor_name        // ç™ºæ³¨å…ˆå
po_date            // ç™ºæ³¨æ—¥
subject            // ä»¶å
delivery_date      // ç´æœŸ
delivery_location  // ç´å…¥å ´æ‰€
currency           // é€šè²¨
exchange_rate      // ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ
tax_code           // ç¨ã‚³ãƒ¼ãƒ‰
tax_rate           // ç¨ç‡
subtotal           // å°è¨ˆ
tax_amount         // æ¶ˆè²»ç¨
total              // åˆè¨ˆ
total_jpy          // å††æ›ç®—
status             // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

// ç™ºæ³¨æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ« (po_items)
line_no            // æ˜ç´°è¡Œç•ªå·
item_code          // ã‚¢ã‚¤ãƒ†ãƒ ã‚³ãƒ¼ãƒ‰
item_name          // ã‚¢ã‚¤ãƒ†ãƒ å
item_detail        // è©³ç´°é …ç›®
unit_price         // å˜ä¾¡
quantity           // æ•°é‡
unit               // å˜ä½
amount             // é‡‘é¡
inventory_type     // åœ¨åº«ç®¡ç†åŒºåˆ†
project_ids        // æ¡ˆä»¶ç•ªå· (è¤‡æ•°ã€è¡¨ç¤ºç”¨)
project_display    // æ¡ˆä»¶è¡¨ç¤ºå
remarks            // å‚™è€ƒ

// ERPç™»éŒ²ç”¨ãƒ†ãƒ¼ãƒ–ãƒ« (erp_items)
erp_item_code      // ã‚¢ã‚¤ãƒ†ãƒ ã‚³ãƒ¼ãƒ‰
erp_item_detail    // è©³ç´°é …ç›®
erp_project_id     // æ¡ˆä»¶ç•ªå·
erp_quantity       // é…åˆ†æ•°é‡
erp_unit_price     // å˜ä¾¡
```

**ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼**:
- **ID**: `custom_view_id` (config.jsã§è¨­å®š)
- **åå‰**: ç™ºæ³¨ç™»éŒ²ç”»é¢
- **ç¨®é¡**: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### ãƒã‚¹ã‚¿ã‚¢ãƒ—ãƒª

| App | App ID | ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|-----|--------|---------------|
| ç™ºæ³¨å…ˆãƒã‚¹ã‚¿ | 746 | vendor_code, vendor_name, address, contact, phone, email |
| ã‚¢ã‚¤ãƒ†ãƒ ãƒã‚¹ã‚¿ | 745 | item_code, item_name, category, standard_price, unit, specification |
| è¦‹ç©ãƒã‚¹ã‚¿ | 750 | quote_number, vendor, quote_name, expiry_date, quote_items |
| åŸºæœ¬æƒ…å ±ãƒã‚¹ã‚¿ | 749 | data_type, code, name, company_name, tax_rate |
| æ¡ˆä»¶ãƒã‚¹ã‚¿ | 674 | body_id (æ¡ˆä»¶ç•ªå·) |

---

## 2. å°å…¥ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 2.1 å‰ææ¡ä»¶

- kintone ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã‚³ãƒ¼ã‚¹ä»¥ä¸Š
- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†æ¨©é™
- ã‚¢ãƒ—ãƒªä½œæˆæ¨©é™
- JavaScript/CSS ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒæœ‰åŠ¹

### 2.2 ã‚¢ãƒ—ãƒªä½œæˆæ‰‹é †

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒã‚¹ã‚¿ã‚¢ãƒ—ãƒªã®ä½œæˆ

1. **ç™ºæ³¨å…ˆãƒã‚¹ã‚¿ (App ID: 746)**
```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- vendor_code (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- vendor_name (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- address (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- contact (æ–‡å­—åˆ—1è¡Œ)
- phone (æ–‡å­—åˆ—1è¡Œ)
- email (æ–‡å­—åˆ—1è¡Œ)
- payment_terms (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
```

2. **ã‚¢ã‚¤ãƒ†ãƒ ãƒã‚¹ã‚¿ (App ID: 745)**
```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- item_code (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- item_name (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- category (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³)
- is_inventory (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³: åœ¨åº«å“/éåœ¨åº«å“)
- standard_price (æ•°å€¤)
- unit (æ–‡å­—åˆ—1è¡Œ)
- specification (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
```

3. **è¦‹ç©ãƒã‚¹ã‚¿ (App ID: 750)**
```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- quote_number (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- vendor (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- quote_name (æ–‡å­—åˆ—1è¡Œ)
- expiry_date (æ—¥ä»˜)
- currency (æ–‡å­—åˆ—1è¡Œ)
- quote_items (ãƒ†ãƒ¼ãƒ–ãƒ«):
  - item_code (æ–‡å­—åˆ—1è¡Œ)
  - item_name (æ–‡å­—åˆ—1è¡Œ)
  - item_detail (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
  - unit_price (æ•°å€¤)
  - quantity (æ•°å€¤)
  - unit (æ–‡å­—åˆ—1è¡Œ)
  - amount (è¨ˆç®—: unit_price * quantity)
  - inventory_type (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³)
```

4. **åŸºæœ¬æƒ…å ±ãƒã‚¹ã‚¿ (App ID: 749)**
```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- data_type (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³: ç™ºæ³¨å…ƒ/é€šè²¨/ç¨ã‚³ãƒ¼ãƒ‰)
- code (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- name (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- company_name (æ–‡å­—åˆ—1è¡Œ)
- address (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- representative (æ–‡å­—åˆ—1è¡Œ)
- phone (æ–‡å­—åˆ—1è¡Œ)
- tax_rate (æ•°å€¤) â€»ç¨ã‚³ãƒ¼ãƒ‰ã®å ´åˆã®ã¿
```

5. **æ¡ˆä»¶ãƒã‚¹ã‚¿ (App ID: 674)**
```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- body_id (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ (æ¡ˆä»¶ç•ªå·)
- body_name (æ–‡å­—åˆ—1è¡Œ) (æ¡ˆä»¶å)
- status (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³)
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒªã®ä½œæˆ

1. **æ–°è¦ã‚¢ãƒ—ãƒªä½œæˆ**: ã€Œã¯ã˜ã‚ã‹ã‚‰ä½œæˆã€ã‚’é¸æŠ

2. **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ **:

**åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³**:
```
- po_number (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ *ãƒ¦ãƒ‹ãƒ¼ã‚¯
- supplier_company (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³)
- supplier_company_name (æ–‡å­—åˆ—1è¡Œ)
- supplier_address (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- supplier_representative (æ–‡å­—åˆ—1è¡Œ)
- vendor (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- vendor_name (æ–‡å­—åˆ—1è¡Œ)
- vendor_address (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- vendor_contact (æ–‡å­—åˆ—1è¡Œ)
- po_date (æ—¥ä»˜) *å¿…é ˆ
- subject (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- delivery_date (æ—¥ä»˜)
- delivery_location (æ–‡å­—åˆ—1è¡Œ)
- currency (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³: JPY/USD/EUR) *å¿…é ˆ
- exchange_rate (æ•°å€¤, å°æ•°ç‚¹2æ¡, åˆæœŸå€¤1.00)
- tax_code (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³) *å¿…é ˆ
- tax_rate (æ•°å€¤, å°æ•°ç‚¹2æ¡)
- remarks (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- status (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³: ä¸‹æ›¸ã/æ‰¿èªå¾…ã¡/ç™ºæ³¨æ¸ˆã¿/å®Œäº†)
```

**é‡‘é¡ã‚µãƒãƒªãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³**:
```
- subtotal (æ•°å€¤, å°æ•°ç‚¹2æ¡)
- tax_amount (æ•°å€¤, å°æ•°ç‚¹2æ¡)
- total (æ•°å€¤, å°æ•°ç‚¹2æ¡)
- total_jpy (æ•°å€¤, å°æ•°ç‚¹2æ¡)
```

**ç™ºæ³¨æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ« (po_items)**:
```
- line_no (æ•°å€¤) *å¿…é ˆ
- item_code (æ–‡å­—åˆ—1è¡Œ)
- item_name (æ–‡å­—åˆ—1è¡Œ) *å¿…é ˆ
- item_detail (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- unit_price (æ•°å€¤, å°æ•°ç‚¹2æ¡) *å¿…é ˆ
- quantity (æ•°å€¤, å°æ•°ç‚¹2æ¡) *å¿…é ˆ
- unit (æ–‡å­—åˆ—1è¡Œ)
- amount (è¨ˆç®—: unit_price * quantity)
- inventory_type (ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³: åœ¨åº«å“/éåœ¨åº«å“)
- project_ids (æ–‡å­—åˆ—1è¡Œ)
- project_display (æ–‡å­—åˆ—1è¡Œ)
- remarks (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
```

**ERPç™»éŒ²ç”¨ãƒ†ãƒ¼ãƒ–ãƒ« (erp_items)**:
```
- erp_item_code (æ–‡å­—åˆ—1è¡Œ)
- erp_item_detail (æ–‡å­—åˆ—è¤‡æ•°è¡Œ)
- erp_project_id (æ–‡å­—åˆ—1è¡Œ)
- erp_quantity (æ•°å€¤, å°æ•°ç‚¹2æ¡)
- erp_unit_price (æ•°å€¤, å°æ•°ç‚¹2æ¡)
```

3. **ã‚¢ãƒ—ãƒªè¨­å®š**:
   - ä¸€è¦§: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¨™æº–ä¸€è¦§ã‚’ä½¿ç”¨
   - ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™: é©åˆ‡ã«è¨­å®š

4. **ã‚¢ãƒ—ãƒªã®å…¬é–‹**: ã€Œè¨­å®šå®Œäº†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®ä½œæˆ

1. **ã‚¢ãƒ—ãƒªè¨­å®š** â†’ **ä¸€è¦§** â†’ **+** (æ–°è¦ä¸€è¦§è¿½åŠ )
2. ä¸€è¦§å: `ç™ºæ³¨ç™»éŒ²ç”»é¢`
3. ä¸€è¦§ã®ç¨®é¡: **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
4. HTML: ç©ºç™½ã®ã¾ã¾ (JavaScriptã§å‹•çš„ç”Ÿæˆ)
5. ä¿å­˜

#### ã‚¹ãƒ†ãƒƒãƒ—4: App IDã®ç¢ºèª

å„ã‚¢ãƒ—ãƒªã®URLã‹ã‚‰ App ID ã‚’ç¢ºèª:

```
https://[ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³].cybozu.com/k/[App ID]/
ä¾‹: https://example.cybozu.com/k/746/ â†’ App ID: 746
```

### 2.3 JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

#### å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
kintone-po-erp-fixed.zip
â”œâ”€â”€ config.js                    (è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«)
â”œâ”€â”€ utils.js                     (ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)
â”œâ”€â”€ masterData.js                (ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿æ“ä½œ)
â”œâ”€â”€ calculator.js                (é‡‘é¡è¨ˆç®—)
â”œâ”€â”€ styles_updated.js            (CSSã‚¹ã‚¿ã‚¤ãƒ«)
â”œâ”€â”€ customView_part1.js          (ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼åˆæœŸåŒ–)
â”œâ”€â”€ customView_part2_updated.js  (æ˜ç´°ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†)
â”œâ”€â”€ customView_part3_updated.js  (ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²)
â”œâ”€â”€ projectAllocation.js         (æ¡ˆä»¶é…åˆ†)
â”œâ”€â”€ erpBuilder.js                (ERPé€£æº)
â””â”€â”€ SETUP_GUIDE.md               (ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰)
```

#### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ‰‹é †

1. **config.js ã®ç·¨é›†**:

```javascript
// App IDã‚’ç’°å¢ƒã«åˆã‚ã›ã¦è¨­å®š
const APP_IDS = {
  PO_MANAGEMENT: 0,    // ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒªã®App ID (kintone.app.getId()ã§è‡ªå‹•å–å¾—)
  VENDOR_MASTER: 746,  // å®Ÿéš›ã®App IDã«å¤‰æ›´
  ITEM_MASTER: 745,
  QUOTE_MASTER: 750,
  BASIC_INFO: 749,
  PROJECT_MASTER: 674,
  WAREHOUSE: 747
};

// ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼IDã®è¨­å®š
const CUSTOM_VIEW_ID = 'custom_view_12345';  // å®Ÿéš›ã®ãƒ“ãƒ¥ãƒ¼IDã«å¤‰æ›´
```

**ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼IDã®ç¢ºèªæ–¹æ³•**:
```
1. ã‚¢ãƒ—ãƒªè¨­å®š â†’ ä¸€è¦§
2. ã€Œç™ºæ³¨ç™»éŒ²ç”»é¢ã€ã®æ­¯è»Šã‚¢ã‚¤ã‚³ãƒ³ â†’ ç·¨é›†
3. URLã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ç¢ºèª:
   ...&view=12345 â†’ CUSTOM_VIEW_ID = '12345'
```

2. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**:

ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒªã®è¨­å®šç”»é¢:

```
ã‚¢ãƒ—ãƒªè¨­å®š â†’ JavaScript / CSSã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º â†’ +
```

**ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é †åº** (é‡è¦):

```
1. config.js
2. utils.js
3. masterData.js
4. calculator.js
5. styles_updated.js
6. customView_part1.js
7. customView_part2_updated.js
8. customView_part3_updated.js
9. projectAllocation.js
10. erpBuilder.js
```

> âš ï¸ **æ³¨æ„**: ã“ã®é †åºã‚’å®ˆã‚‰ãªã„ã¨ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™

3. **ã‚¢ãƒ—ãƒªã®æ›´æ–°**: ã€Œæ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

4. **å‹•ä½œç¢ºèª**:
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã€Œç™ºæ³¨ç™»éŒ²ç”»é¢ã€ã‚’é–‹ã
   - ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ« (F12) ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª
   - UIãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª

---

## 3. JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

### 3.1 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜é–¢ä¿‚

```
config.js (ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š)
    â†“
utils.js (ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)
    â†“
masterData.js (ãƒã‚¹ã‚¿æ“ä½œ) â†’ calculator.js (è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯)
    â†“                              â†“
styles_updated.js (CSS) â”€â”€â”        â”‚
    â†“                     â”‚        â”‚
customView_part1.js (åˆæœŸåŒ–)       â”‚
    â†“                     â”‚        â”‚
customView_part2_updated.js â†â”€â”€â”€â”€â”€â”€â”˜
(æ˜ç´°ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ«)           â”‚
    â†“                     â”‚
customView_part3_updated.js        â”‚
(ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²)             â”‚        â”‚
    â†“                     â”‚        â”‚
projectAllocation.js â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(æ¡ˆä»¶é…åˆ†)
    â†“
erpBuilder.js (ERPé€£æº)
```

### 3.2 å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è©³ç´°

#### config.js (è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«)

**å½¹å‰²**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ä½¿ç”¨ã™ã‚‹è¨­å®šå€¤ã‚’å®šç¾©

**ä¸»è¦è¨­å®š**:

```javascript
window.PO_CONFIG = {
  APP_IDS: { ... },           // App IDä¸€è¦§
  FIELD_IDS: { ... },         // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ä¸€è¦§
  CONSTANTS: { ... },         // å®šæ•° (æœ€å¤§è¡Œæ•°ã€ç™ºæ³¨ç•ªå·ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ç­‰)
  CUSTOM_VIEW_ID: '...',      // ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ID
  STATUS: { ... },            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å®šç¾©
  DATA_TYPES: { ... },        // ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥
  UI: {
    COLORS: { ... },          // UIã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
    BUTTON_TEXT: { ... },     // ãƒœã‚¿ãƒ³ãƒ©ãƒ™ãƒ«
    MESSAGES: { ... }         // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  },
  DEBUG: true                 // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
};
```

**å¤‰æ›´ãŒå¿…è¦ãªé …ç›®**:
- `APP_IDS`: ç’°å¢ƒã«å¿œã˜ãŸApp ID
- `CUSTOM_VIEW_ID`: ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ID
- `FIELD_IDS`: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ãŒç•°ãªã‚‹å ´åˆ

#### utils.js (ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)

**å½¹å‰²**: å…±é€šå‡¦ç†ã®æä¾›

**ä¸»è¦é–¢æ•°**:

```javascript
window.Utils = {
  // ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  showAlert(message, type)
  showConfirm(message)
  
  // å…¥åŠ›å€¤æ¤œè¨¼
  validateRequired(fields)
  validateNumeric(value)
  
  // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  formatDate(date, format)
  
  // é‡‘é¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  formatCurrency(amount, decimals)
  
  // ãƒ¬ã‚³ãƒ¼ãƒ‰æ“ä½œ
  getRecords(appId, query, fields)
  createRecord(appId, record)
  updateRecord(appId, recordId, record)
  
  // DOMæ“ä½œ
  createElement(html)
  removeElement(selector)
  
  // ãƒ‡ãƒãƒƒã‚°
  log(message, type)
};
```

#### masterData.js (ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿æ“ä½œ)

**å½¹å‰²**: å„ãƒã‚¹ã‚¿ã‚¢ãƒ—ãƒªã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—

**ä¸»è¦é–¢æ•°**:

```javascript
window.MasterData = {
  // åˆæœŸåŒ–
  async loadAll()
  
  // ç™ºæ³¨å…ˆ
  vendors: []
  searchVendors(keyword)
  
  // ã‚¢ã‚¤ãƒ†ãƒ 
  items: []
  searchItems(keyword)
  
  // è¦‹ç©
  searchQuotes(vendorCode, keyword)
  
  // åŸºæœ¬æƒ…å ±
  suppliers: []
  currencies: []
  taxCodes: []
  
  // æ¡ˆä»¶
  projects: []
  searchProjects(keyword)
};
```

**ãƒ‡ãƒ¼ã‚¿å–å¾—ä¾‹**:

```javascript
// å…¨ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰
await MasterData.loadAll();

// ç™ºæ³¨å…ˆæ¤œç´¢
const vendors = MasterData.searchVendors('æ ªå¼ä¼šç¤¾');

// ã‚¢ã‚¤ãƒ†ãƒ æ¤œç´¢
const items = MasterData.searchItems('A001');
```

#### calculator.js (é‡‘é¡è¨ˆç®—)

**å½¹å‰²**: é‡‘é¡ãƒ»ç¨é¡ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

**ä¸»è¦é–¢æ•°**:

```javascript
window.Calculator = {
  // è¡Œã®é‡‘é¡è¨ˆç®—
  calculateRowAmount(row)
  
  // å°è¨ˆãƒ»æ¶ˆè²»ç¨ãƒ»åˆè¨ˆã®è¨ˆç®—
  calculateTotals()
  
  // ç‚ºæ›¿æ›ç®—
  convertToJPY(amount, rate)
  
  // æ•°å€¤æ¤œè¨¼
  isValidNumber(value)
  
  // ä¸¸ã‚å‡¦ç†
  round(value, decimals)
};
```

**è¨ˆç®—å¼**:

```javascript
// è¡Œé‡‘é¡
amount = unitPrice Ã— quantity

// å°è¨ˆ
subtotal = Î£(amount)

// æ¶ˆè²»ç¨
taxAmount = subtotal Ã— (taxRate / 100)

// åˆè¨ˆ
total = subtotal + taxAmount

// å††æ›ç®—
totalJPY = total Ã— exchangeRate
```

#### styles_updated.js (CSSã‚¹ã‚¿ã‚¤ãƒ«)

**å½¹å‰²**: ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©

**ä¸»è¦ã‚¹ã‚¿ã‚¤ãƒ«**:

```css
/* ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒ å…¨ä½“ */
.po-custom-form { ... }

/* åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.po-section { ... }
.po-form-row { ... }
.po-input-group { ... }

/* ç™ºæ³¨æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ« */
.po-table { ... }
.po-table-header { ... }
.po-table-row { ... }

/* ãƒ¢ãƒ¼ãƒ€ãƒ« */
.po-modal { display: none; ... }
.po-modal-content { ... }
.po-modal-header { ... }
.po-modal-body { ... }
.po-modal-footer { ... }

/* æ¡ˆä»¶é…åˆ†å°‚ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« */
.modal-overlay { ... }
.modal-content { ... }
.allocation-table { ... }

/* è¦‹ç©ã‚«ãƒ¼ãƒ‰ */
.po-quote-card { ... }
.po-quote-header { ... }
.po-quote-body { ... }

/* ãƒœã‚¿ãƒ³ */
.po-btn { ... }
.po-btn-primary { ... }
.po-btn-secondary { ... }

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes fadeIn { ... }
@keyframes slideDown { ... }
```

**CSSå¤‰æ•° (CONFIG.UI.COLORS)**:

```css
--primary: #3498db (é’)
--secondary: #95a5a6 (ã‚°ãƒ¬ãƒ¼)
--success: #27ae60 (ç·‘)
--danger: #e74c3c (èµ¤)
--warning: #f39c12 (ã‚ªãƒ¬ãƒ³ã‚¸)
--light: #ecf0f1 (ãƒ©ã‚¤ãƒˆã‚°ãƒ¬ãƒ¼)
--dark: #2c3e50 (ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼)
--border: #dcdcdc (ãƒœãƒ¼ãƒ€ãƒ¼ã‚°ãƒ¬ãƒ¼)
```

#### customView_part1.js (åˆæœŸåŒ–)

**å½¹å‰²**: ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã®åˆæœŸåŒ–ã¨HTMLç”Ÿæˆ

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:

```javascript
kintone.events.on('app.record.index.show', async (event) => {
  // 1. ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼IDãƒã‚§ãƒƒã‚¯
  if (event.viewId !== CONFIG.CUSTOM_VIEW_ID) return;
  
  // 2. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  Utils.showLoader();
  
  // 3. æ¨™æº–ä¸€è¦§ã‚’éè¡¨ç¤º
  hideDefaultList();
  
  // 4. ã‚«ã‚¹ã‚¿ãƒ HTMLã®æŒ¿å…¥
  insertCustomForm();
  
  // 5. CSSã®é©ç”¨
  addCustomCSS();
  
  // 6. ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
  await MasterData.loadAll();
  
  // 7. ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®è¨­å®š
  setupDropdowns();
  
  // 8. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ²
  attachEventListeners();
  
  // 9. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°éè¡¨ç¤º
  Utils.hideLoader();
});
```

**ç”ŸæˆHTMLæ§‹é€ **:

```html
<div class="po-custom-form">
  <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div class="po-section">
    <h2>åŸºæœ¬æƒ…å ±</h2>
    <div class="po-form-row">...</div>
  </div>
  
  <!-- ç™ºæ³¨å†…è¨³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div class="po-section">
    <h2>ç™ºæ³¨å†…è¨³</h2>
    <table class="po-table">
      <thead>...</thead>
      <tbody id="itemsBody"></tbody>
    </table>
    <button id="btnAddItem">+ æ˜ç´°è¡Œè¿½åŠ </button>
  </div>
  
  <!-- é‡‘é¡ã‚µãƒãƒªãƒ¼ -->
  <div class="po-section po-summary">...</div>
  
  <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
  <div class="po-section po-actions">
    <button id="btnSaveDraft">ä¸‹æ›¸ãä¿å­˜</button>
    <button id="btnRegister">ç™»éŒ²</button>
  </div>
  
  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ç¾¤ -->
  <div id="modalVendorSearch" class="po-modal">...</div>
  <div id="modalItemSearch" class="po-modal">...</div>
  <div id="modalQuoteRef" class="po-modal">...</div>
  <div id="modalProjectSelect" class="po-modal">...</div>
</div>
```

#### customView_part2_updated.js (æ˜ç´°ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†)

**å½¹å‰²**: æ˜ç´°è¡Œæ“ä½œã¨ãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½

**ä¸»è¦é–¢æ•°**:

```javascript
// æ˜ç´°è¡Œè¿½åŠ 
function addItemRow() { ... }

// æ˜ç´°è¡Œå‰Šé™¤
function deleteItemRow(row) { ... }

// è¡Œç•ªå·ã®æŒ¯ã‚Šç›´ã—
function renumberRows() { ... }

// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
function attachRowEventListeners(row) { ... }

// ã‚¢ã‚¤ãƒ†ãƒ æ¤œç´¢ãƒ¢ãƒ¼ãƒ€ãƒ«
function openItemSearchModal(row) { ... }
function performSearch() { ... }
function selectItem(row, itemData) { ... }

// è¦‹ç©å‚ç…§ãƒ¢ãƒ¼ãƒ€ãƒ«
window.openQuoteModal() { ... }
function searchQuotes(vendorCode, keyword) { ... }
function importQuoteItems(quoteRecord) { ... }
```

**æ˜ç´°è¡ŒHTMLæ§‹é€ **:

```html
<tr class="po-table-row" data-row-index="0">
  <td>1</td> <!-- è¡Œç•ªå· -->
  <td>
    <input type="text" class="item-code" />
    <button class="btn-item-search">ğŸ”</button>
  </td>
  <td><input type="text" class="item-name" /></td>
  <td><textarea class="item-detail"></textarea></td>
  <td><input type="number" class="unit-price" /></td>
  <td><input type="number" class="quantity" /></td>
  <td><input type="text" class="unit" /></td>
  <td><span class="amount">0</span></td>
  <td class="project-tags">
    <button class="btn-project-add">+ æ¡ˆä»¶é…åˆ†</button>
  </td>
  <td><textarea class="remarks"></textarea></td>
  <td><button class="btn-delete">å‰Šé™¤</button></td>
</tr>
```

#### customView_part3_updated.js (ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²)

**å½¹å‰²**: ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¿å­˜å‡¦ç†

**ä¸»è¦é–¢æ•°**:

```javascript
// ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²
async function submitRecord(isDraft) { ... }

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
function validateForm() { ... }

// ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰
function buildRecordData(isDraft, poNumber) { ... }

// ç™ºæ³¨ç•ªå·ç”Ÿæˆ
function generatePONumber() { ... }
```

**ç™»éŒ²ãƒ•ãƒ­ãƒ¼**:

```javascript
async function submitRecord(isDraft) {
  // 1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  if (!validateForm()) return;
  
  // 2. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  const confirmed = await Utils.showConfirm(
    isDraft ? 'ä¸‹æ›¸ãä¿å­˜ã—ã¾ã™ã‹?' : 'ç™»éŒ²ã—ã¾ã™ã‹?'
  );
  if (!confirmed) return;
  
  // 3. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  Utils.showLoader('ç™»éŒ²ä¸­...');
  
  // 4. ç™ºæ³¨ç•ªå·ç”Ÿæˆ
  const poNumber = generatePONumber();
  
  // 5. ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰
  const recordData = buildRecordData(isDraft, poNumber);
  
  // 6. ERPãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
  recordData[CONFIG.FIELD_IDS.ERP_ITEMS] = 
    ERPBuilder.generateERPItems(recordData[CONFIG.FIELD_IDS.ITEMS]);
  
  // 7. ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
  const result = await Utils.createRecord(
    CONFIG.APP_IDS.PO_MANAGEMENT,
    recordData
  );
  
  // 8. æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  Utils.showAlert('ç™ºæ³¨æ›¸ã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');
  
  // 9. è©³ç´°ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  location.href = `${kintone.app.getUrl()}show#record=${result.id}`;
}
```

#### projectAllocation.js (æ¡ˆä»¶é…åˆ†)

**å½¹å‰²**: æ¡ˆä»¶é…åˆ†ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å‡¦ç†

**ä¸»è¦é–¢æ•°**:

```javascript
window.ProjectAllocation = {
  // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³
  open(row)
  
  // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒ­ãƒ¼ã‚º
  close()
  
  // æ¡ˆä»¶è¡Œè¿½åŠ 
  addAllocationRow()
  
  // æ¡ˆä»¶è¡Œå‰Šé™¤
  deleteAllocationRow(btn)
  
  // Excelè²¼ã‚Šä»˜ã‘
  showPasteDialog()
  parsePasteData(text)
  
  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  validateAllocations()
  checkDuplicates()
  checkTotalQuantity()
  
  // é…åˆ†ä¿å­˜
  save()
};
```

**æ¡ˆä»¶é…åˆ†ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:

```javascript
// ä¸€æ™‚ä¿å­˜ (å¤‰æ•°)
allocations = [
  { project_id: 'P001', quantity: 6 },
  { project_id: 'P002', quantity: 4 }
];

// ãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ (po_items)
{
  project_ids: 'P001,P002',
  project_display: 'P001(6), P002(4)'
}
```

#### erpBuilder.js (ERPé€£æº)

**å½¹å‰²**: ERPãƒ†ãƒ¼ãƒ–ãƒ«ã®è‡ªå‹•ç”Ÿæˆ

**ä¸»è¦é–¢æ•°**:

```javascript
window.ERPBuilder = {
  // ERPãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
  generateERPItems(poItems)
  
  // æ¡ˆä»¶é…åˆ†å±•é–‹
  expandAllocations(item)
  
  // è¡Œãƒ‡ãƒ¼ã‚¿ä½œæˆ
  createERPRow(item, projectId, quantity)
};
```

**å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯**:

```javascript
// å…¥åŠ›: ç™ºæ³¨æ˜ç´° (po_items)
{
  item_code: 'A001',
  item_detail: 'ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹è£½',
  unit_price: 1000,
  quantity: 10,
  allocations: [
    { project_id: 'P001', quantity: 6 },
    { project_id: 'P002', quantity: 4 }
  ]
}

// å‡ºåŠ›: ERPãƒ†ãƒ¼ãƒ–ãƒ« (erp_items)
[
  {
    erp_item_code: 'A001',
    erp_item_detail: 'ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹è£½',
    erp_project_id: 'P001',
    erp_quantity: 6,
    erp_unit_price: 1000
  },
  {
    erp_item_code: 'A001',
    erp_item_detail: 'ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹è£½',
    erp_project_id: 'P002',
    erp_quantity: 4,
    erp_unit_price: 1000
  }
]
```

---

## 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 4.1 ãƒ¬ã‚³ãƒ¼ãƒ‰æ§‹é€  (ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒª)

```javascript
{
  // ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
  po_number: { value: 'PO-20260214-001' },
  supplier_company: { value: 'ORDER_SRC_01' },
  vendor: { value: 'V001' },
  vendor_name: { value: 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«å•†äº‹' },
  po_date: { value: '2026-02-14' },
  subject: { value: '2æœˆéƒ¨å“ç™ºæ³¨' },
  currency: { value: 'JPY' },
  exchange_rate: { value: '1.00' },
  tax_code: { value: 'TAX_10' },
  tax_rate: { value: '10' },
  subtotal: { value: '100000' },
  tax_amount: { value: '10000' },
  total: { value: '110000' },
  status: { value: 'æ‰¿èªå¾…ã¡' },
  
  // ç™ºæ³¨æ˜ç´° (po_items)
  po_items: {
    value: [
      {
        value: {
          line_no: { value: '1' },
          item_code: { value: 'A001' },
          item_name: { value: 'ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹éƒ¨å“' },
          item_detail: { value: 'Ï†10Ã—50mm' },
          unit_price: { value: '1000' },
          quantity: { value: '10' },
          unit: { value: 'å€‹' },
          amount: { value: '10000' },
          inventory_type: { value: 'åœ¨åº«å“' },
          project_ids: { value: 'P001,P002' },
          project_display: { value: 'P001(6), P002(4)' },
          remarks: { value: '' }
        }
      }
    ]
  },
  
  // ERPãƒ†ãƒ¼ãƒ–ãƒ« (erp_items)
  erp_items: {
    value: [
      {
        value: {
          erp_item_code: { value: 'A001' },
          erp_item_detail: { value: 'Ï†10Ã—50mm' },
          erp_project_id: { value: 'P001' },
          erp_quantity: { value: '6' },
          erp_unit_price: { value: '1000' }
        }
      },
      {
        value: {
          erp_item_code: { value: 'A001' },
          erp_item_detail: { value: 'Ï†10Ã—50mm' },
          erp_project_id: { value: 'P002' },
          erp_quantity: { value: '4' },
          erp_unit_price: { value: '1000' }
        }
      }
    ]
  }
}
```

### 4.2 æ¡ˆä»¶é…åˆ†ã®å†…éƒ¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

**JavaScriptå¤‰æ•° (ä¸€æ™‚ä¿å­˜)**:

```javascript
// customView_part2.js å†…ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
let rowAllocations = {
  '0': [  // è¡Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    { project_id: 'P001', quantity: 6 },
    { project_id: 'P002', quantity: 4 }
  ],
  '1': [
    { project_id: 'P003', quantity: 20 }
  ]
};
```

**ãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜æ™‚ã®å¤‰æ›**:

```javascript
// po_items ãƒ†ãƒ¼ãƒ–ãƒ«ã®å„è¡Œ
{
  project_ids: { value: 'P001,P002' },          // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
  project_display: { value: 'P001(6), P002(4)' }  // è¡¨ç¤ºç”¨
}
```

---

## 5. ä¸»è¦å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 5.1 ã‚¢ãƒ—ãƒªèµ·å‹•ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ¥ãƒ¼ã‚’é–‹ã
  â†“
kintone.events.on('app.record.index.show')
  â†“
customView_part1.js: åˆæœŸåŒ–å‡¦ç†
  â”œâ”€ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  â”œâ”€ æ¨™æº–ä¸€è¦§ã‚’éè¡¨ç¤º
  â”œâ”€ ã‚«ã‚¹ã‚¿ãƒ HTMLã‚’æŒ¿å…¥
  â”œâ”€ CSSé©ç”¨
  â”œâ”€ ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
  â”‚   â”œâ”€ ç™ºæ³¨å…ˆãƒã‚¹ã‚¿å–å¾—
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ ãƒã‚¹ã‚¿å–å¾—
  â”‚   â”œâ”€ åŸºæœ¬æƒ…å ±ãƒã‚¹ã‚¿å–å¾—
  â”‚   â””â”€ æ¡ˆä»¶ãƒã‚¹ã‚¿å–å¾—
  â”œâ”€ ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¨­å®š
  â”‚   â”œâ”€ ç™ºæ³¨å…ƒ
  â”‚   â”œâ”€ é€šè²¨
  â”‚   â””â”€ ç¨ã‚³ãƒ¼ãƒ‰
  â”œâ”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
  â”‚   â”œâ”€ æ˜ç´°è¿½åŠ ãƒœã‚¿ãƒ³
  â”‚   â”œâ”€ è¦‹ç©å‚ç…§ãƒœã‚¿ãƒ³
  â”‚   â”œâ”€ ä¸‹æ›¸ãä¿å­˜ãƒœã‚¿ãƒ³
  â”‚   â””â”€ ç™»éŒ²ãƒœã‚¿ãƒ³
  â””â”€ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°éè¡¨ç¤º
  â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…ã¡
```

### 5.2 ç™ºæ³¨æ˜ç´°è¿½åŠ ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œ+ æ˜ç´°è¡Œè¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
customView_part2.js: addItemRow()
  â”œâ”€ æœ€å¤§è¡Œæ•°ãƒã‚§ãƒƒã‚¯ (20è¡Œ)
  â”œâ”€ æ–°ã—ã„ <tr> è¦ç´ ã‚’ç”Ÿæˆ
  â”‚   â”œâ”€ è¡Œç•ªå·
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ ã‚³ãƒ¼ãƒ‰ + æ¤œç´¢ãƒœã‚¿ãƒ³
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ å
  â”‚   â”œâ”€ è©³ç´°é …ç›®
  â”‚   â”œâ”€ å˜ä¾¡
  â”‚   â”œâ”€ æ•°é‡
  â”‚   â”œâ”€ å˜ä½
  â”‚   â”œâ”€ é‡‘é¡
  â”‚   â”œâ”€ æ¡ˆä»¶é…åˆ†ãƒœã‚¿ãƒ³
  â”‚   â”œâ”€ å‚™è€ƒ
  â”‚   â””â”€ å‰Šé™¤ãƒœã‚¿ãƒ³
  â”œâ”€ ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡Œã‚’è¿½åŠ 
  â”œâ”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
  â”‚   â”œâ”€ å˜ä¾¡ãƒ»æ•°é‡ã®å¤‰æ›´ â†’ é‡‘é¡å†è¨ˆç®—
  â”‚   â”œâ”€ æ¤œç´¢ãƒœã‚¿ãƒ³ â†’ ã‚¢ã‚¤ãƒ†ãƒ æ¤œç´¢ãƒ¢ãƒ¼ãƒ€ãƒ«
  â”‚   â”œâ”€ æ¡ˆä»¶é…åˆ†ãƒœã‚¿ãƒ³ â†’ æ¡ˆä»¶é…åˆ†ãƒ¢ãƒ¼ãƒ€ãƒ«
  â”‚   â””â”€ å‰Šé™¤ãƒœã‚¿ãƒ³ â†’ è¡Œå‰Šé™¤
  â””â”€ æ˜ç´°è¡Œæ•°ã‚’æ›´æ–°
  â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›
```

### 5.3 æ¡ˆä»¶é…åˆ†ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œ+ æ¡ˆä»¶é…åˆ†ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
projectAllocation.js: ProjectAllocation.open(row)
  â”œâ”€ è¡Œã®æ•°é‡ã‚’å–å¾—
  â”œâ”€ æ—¢å­˜ã®é…åˆ†ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  â”œâ”€ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ ã‚³ãƒ¼ãƒ‰è¡¨ç¤º
  â”‚   â”œâ”€ æ˜ç´°æ•°é‡è¡¨ç¤º
  â”‚   â”œâ”€ é…åˆ†æ¸ˆæ•°é‡è¡¨ç¤º
  â”‚   â””â”€ é…åˆ†ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
  â””â”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
      â”œâ”€ ã€Œ+ æ¡ˆä»¶ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³
      â”œâ”€ ã€ŒğŸ“‹ è²¼ã‚Šä»˜ã‘ã€ãƒœã‚¿ãƒ³
      â”œâ”€ æ•°é‡å…¥åŠ›å¤‰æ›´ â†’ åˆè¨ˆå†è¨ˆç®—
      â”œâ”€ å‰Šé™¤ãƒœã‚¿ãƒ³
      â”œâ”€ OKãƒœã‚¿ãƒ³ â†’ ä¿å­˜
      â””â”€ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ â†’ é–‰ã˜ã‚‹
  â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¡ˆä»¶ã¨æ•°é‡ã‚’å…¥åŠ›
  â†“
ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  â”œâ”€ é‡è¤‡ãƒã‚§ãƒƒã‚¯
  â”œâ”€ æ•°å€¤ãƒã‚§ãƒƒã‚¯
  â””â”€ åˆè¨ˆæ•°é‡ãƒã‚§ãƒƒã‚¯
  â†“
OKãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
ProjectAllocation.save()
  â”œâ”€ é…åˆ†ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ•°ã«ä¿å­˜
  â”œâ”€ æ¡ˆä»¶ã‚¿ã‚°ã‚’è¡¨ç¤º
  â”‚   ä¾‹: [P001] [P002] [+ æ¡ˆä»¶é…åˆ†]
  â””â”€ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
  â†“
æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ 
```

### 5.4 ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
customView_part3.js: submitRecord(false)
  â”œâ”€ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  â”‚   â”œâ”€ å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
  â”‚   â”œâ”€ æ˜ç´°è¡Œå­˜åœ¨ãƒã‚§ãƒƒã‚¯
  â”‚   â”œâ”€ æ•°å€¤ãƒã‚§ãƒƒã‚¯
  â”‚   â””â”€ ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
  â”œâ”€ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
  â”œâ”€ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  â”œâ”€ ç™ºæ³¨ç•ªå·ç”Ÿæˆ
  â”‚   ä¾‹: PO-20260214-001
  â”œâ”€ ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰
  â”‚   â”œâ”€ ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
  â”‚   â”œâ”€ ç™ºæ³¨æ˜ç´° (po_items)
  â”‚   â””â”€ é‡‘é¡è¨ˆç®—
  â”œâ”€ ERPãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
  â”‚   â””â”€ erpBuilder.js: generateERPItems()
  â”‚       â”œâ”€ å„æ˜ç´°è¡Œã‚’ãƒ«ãƒ¼ãƒ—
  â”‚       â”œâ”€ æ¡ˆä»¶é…åˆ†ãŒã‚ã‚‹å ´åˆ
  â”‚       â”‚   â””â”€ æ¡ˆä»¶ã”ã¨ã«è¡Œã‚’å±•é–‹
  â”‚       â””â”€ æ¡ˆä»¶é…åˆ†ãŒãªã„å ´åˆ
  â”‚           â””â”€ æ¡ˆä»¶ç•ªå·ç©ºç™½ã§1è¡Œç”Ÿæˆ
  â”œâ”€ ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ APIå‘¼ã³å‡ºã—
  â”‚   â””â”€ utils.js: Utils.createRecord()
  â”œâ”€ æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  â””â”€ è©³ç´°ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  â†“
ãƒ¬ã‚³ãƒ¼ãƒ‰ä¿å­˜å®Œäº†
```

### 5.5 è¦‹ç©å–è¾¼ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒğŸ“‹ è¦‹ç©å‚ç…§ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
customView_part2.js: openQuoteModal()
  â”œâ”€ ç™ºæ³¨å…ˆã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
  â”œâ”€ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
  â”œâ”€ è¦‹ç©æ¤œç´¢
  â”‚   â””â”€ MasterData.searchQuotes(vendorCode)
  â””â”€ è¦‹ç©ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
  â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã“ã®è¦‹ç©ã‚’å–è¾¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  â†“
importQuoteItems(quoteRecord)
  â”œâ”€ æ—¢å­˜æ˜ç´°ãŒã‚ã‚‹å ´åˆ
  â”‚   â””â”€ ä¸Šæ›¸ãç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  â”œâ”€ è¦‹ç©æ˜ç´°ã‚’ãƒ«ãƒ¼ãƒ—
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ ã‚³ãƒ¼ãƒ‰
  â”‚   â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ å
  â”‚   â”œâ”€ è©³ç´°é …ç›®
  â”‚   â”œâ”€ å˜ä¾¡
  â”‚   â”œâ”€ æ•°é‡
  â”‚   â”œâ”€ å˜ä½
  â”‚   â”œâ”€ é‡‘é¡è¨ˆç®—
  â”‚   â””â”€ ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡Œè¿½åŠ 
  â”œâ”€ é€šè²¨ã‚’è¦‹ç©ã®é€šè²¨ã«å¤‰æ›´
  â”œâ”€ é‡‘é¡åˆè¨ˆã‚’å†è¨ˆç®—
  â”œâ”€ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
  â””â”€ æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  â†“
æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ 
```

---

## 6. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•

### 6.1 App IDã®å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const APP_IDS = {
  PO_MANAGEMENT: 0,    // è‡ªå‹•å–å¾—ã•ã‚Œã‚‹ãŸã‚å¤‰æ›´ä¸è¦
  VENDOR_MASTER: 746,  // å®Ÿéš›ã®App IDã«å¤‰æ›´
  ITEM_MASTER: 745,
  QUOTE_MASTER: 750,
  BASIC_INFO: 749,
  PROJECT_MASTER: 674,
  WAREHOUSE: 747
};
```

### 6.2 ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const FIELD_IDS = {
  HEADER: {
    PO_NUMBER: 'po_number',
    SUPPLIER_COMPANY: 'supplier_company',
    VENDOR: 'vendor',
    // ... ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  },
  ITEMS: 'po_items',
  ITEM_FIELDS: {
    LINE_NO: 'line_no',
    ITEM_CODE: 'item_code',
    // ... ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  },
  ERP_ITEMS: 'erp_items',
  // ... ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
};
```

> âš ï¸ **æ³¨æ„**: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸå ´åˆã€HTMLå†…ã® `data-field` å±æ€§ã‚‚åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

### 6.3 æœ€å¤§æ˜ç´°è¡Œæ•°ã®å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const CONSTANTS = {
  MAX_ITEMS: 20,  // æœ€å¤§è¡Œæ•°ã‚’å¤‰æ›´ (ä¾‹: 50)
  // ...
};
```

### 6.4 ç™ºæ³¨ç•ªå·ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `customView_part3.js`

```javascript
function generatePONumber() {
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const dd = String(today.getDate()).padStart(2, '0');
  
  // é€£ç•ªã®æ¡æ•°ã‚’å¤‰æ›´ (3æ¡ â†’ 4æ¡)
  const seq = '0001';  // ã¾ãŸã¯å‹•çš„ã«å–å¾—
  
  // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´ (ä¾‹: PO-YYYY-MMDD-SEQ)
  return `PO-${yyyy}-${mm}${dd}-${seq}`;
}
```

### 6.5 UIã‚«ãƒ©ãƒ¼ã®å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const UI = {
  COLORS: {
    PRIMARY: '#3498db',   // é’ â†’ ä»–ã®è‰²ã«å¤‰æ›´
    SECONDARY: '#95a5a6', // ã‚°ãƒ¬ãƒ¼
    SUCCESS: '#27ae60',   // ç·‘
    DANGER: '#e74c3c',    // èµ¤
    WARNING: '#f39c12',   // ã‚ªãƒ¬ãƒ³ã‚¸
    // ...
  }
};
```

### 6.6 æ¡ˆä»¶ç•ªå·ã®å½¢å¼å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `projectAllocation.js`

```javascript
function validateAllocations() {
  allocations.forEach(alloc => {
    // æ¡ˆä»¶ç•ªå·ã®å½¢å¼ãƒã‚§ãƒƒã‚¯
    // ç¾åœ¨: è‹±å­—1æ–‡å­— + æ•°å­—3æ¡ (ä¾‹: P001)
    // å¤‰æ›´ä¾‹: è‹±å­—2æ–‡å­— + æ•°å­—4æ¡ (ä¾‹: PR0001)
    const pattern = /^[A-Z]{2}\d{4}$/;
    if (!pattern.test(alloc.project_id)) {
      throw new Error(`æ¡ˆä»¶ç•ªå·ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“: ${alloc.project_id}`);
    }
  });
}
```

### 6.7 ç¨ç‡ã®å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: åŸºæœ¬æƒ…å ±ãƒã‚¹ã‚¿ (ã‚¢ãƒ—ãƒªè¨­å®š)

```
ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥: ç¨ã‚³ãƒ¼ãƒ‰
ã‚³ãƒ¼ãƒ‰: TAX_10
åç§°: æ¶ˆè²»ç¨10%
ç¨ç‡: 10  â† ã“ã®å€¤ã‚’å¤‰æ›´
```

ã‚·ã‚¹ãƒ†ãƒ å´ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã¯ä¸è¦ã§ã™ã€‚

### 6.8 é€šè²¨ã®è¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: åŸºæœ¬æƒ…å ±ãƒã‚¹ã‚¿ (ã‚¢ãƒ—ãƒªè¨­å®š)

```
æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰è¿½åŠ :
ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥: é€šè²¨
ã‚³ãƒ¼ãƒ‰: CNY
åç§°: äººæ°‘å…ƒ
```

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const CURRENCY_CODES = {
  JPY: 'JPY',
  USD: 'USD',
  EUR: 'EUR',
  CNY: 'CNY'  // è¿½åŠ 
};
```

### 6.9 ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.js`

```javascript
const DEBUG = true;  // æœ¬ç•ªç’°å¢ƒã§ã¯ false ã«å¤‰æ›´
```

ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹æ™‚:
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ­ã‚°å‡ºåŠ›
- ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’è¡¨ç¤º
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬

---

## 7. ä¿å®ˆãƒ»é‹ç”¨

### 7.1 å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

#### ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å®šæœŸçš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã‚’æ¡ˆå†…:

```
Chrome: Ctrl+Shift+Delete
Edge: Ctrl+Shift+Delete
Firefox: Ctrl+Shift+Delete
```

ã¾ãŸã¯:

```
F12 â†’ Network ã‚¿ãƒ– â†’ "Disable cache" ã‚’ãƒã‚§ãƒƒã‚¯
```

#### JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°

1. å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å‰Šé™¤
2. æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. ã‚¢ãƒ—ãƒªã‚’æ›´æ–°
4. å‹•ä½œç¢ºèª

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

- ä¸è¦ãªä¸‹æ›¸ããƒ¬ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤
- ERPãƒ†ãƒ¼ãƒ–ãƒ«ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã®å®šæœŸæ›´æ–°

### 7.2 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

#### ã‚¢ãƒ—ãƒªè¨­å®šã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

1. ã€Œã‚¢ãƒ—ãƒªè¨­å®šã€â†’ã€Œã‚¢ãƒ—ãƒªã‚’èª­ã¿è¾¼ã‚€ã€â†’ã€Œç¾åœ¨ã®ã‚¢ãƒ—ãƒªã®è¨­å®šã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã™ã€
2. JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜

#### JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®‰å…¨ãªå ´æ‰€ã«ä¿ç®¡:

```
kintone-po-erp-fixed.zip
â”œâ”€â”€ config.js
â”œâ”€â”€ utils.js
â”œâ”€â”€ ...
â””â”€â”€ SETUP_GUIDE.md
```

#### ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

1. ç™ºæ³¨ç®¡ç†ã‚¢ãƒ—ãƒªã®ä¸€è¦§ç”»é¢
2. ã€Œãã®ä»–ã®æ“ä½œã€â†’ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã¸æ›¸ãå‡ºã™ã€
3. CSVå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### 7.3 ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

**æ¨å¥¨**: Git ãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨

```
kintone-po-system/
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.js
â”‚   â”œâ”€â”€ utils.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ USER_MANUAL.md
â”‚   â””â”€â”€ TECHNICAL_DOC.md
â””â”€â”€ README.md
```

**ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹**:

```
[Fix] æ¡ˆä»¶é…åˆ†ãƒ¢ãƒ¼ãƒ€ãƒ«ã®æ•°é‡ãƒã‚§ãƒƒã‚¯ä¸å…·åˆä¿®æ­£
[Feature] é€šè²¨CNYã‚’è¿½åŠ 
[Update] æœ€å¤§æ˜ç´°è¡Œæ•°ã‚’20ã‹ã‚‰50ã«å¤‰æ›´
```

### 7.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥

ç¾åœ¨ã€ãƒšãƒ¼ã‚¸è¡¨ç¤ºæ™‚ã«æ¯å›ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ã€‚ä»Šå¾Œã®æ”¹å–„æ¡ˆ:

```javascript
// localStorage ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
function loadMasterDataWithCache() {
  const cached = localStorage.getItem('po_master_data');
  const cacheTime = localStorage.getItem('po_master_cache_time');
  
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒ1æ™‚é–“ä»¥å†…ãªã‚‰ä½¿ç”¨
  if (cached && cacheTime && (Date.now() - cacheTime < 3600000)) {
    return JSON.parse(cached);
  }
  
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒãªã„ã€ã¾ãŸã¯æœŸé™åˆ‡ã‚Œã®å ´åˆã¯å†å–å¾—
  const data = await MasterData.loadAll();
  localStorage.setItem('po_master_data', JSON.stringify(data));
  localStorage.setItem('po_master_cache_time', Date.now());
  return data;
}
```

#### ãƒ¬ã‚³ãƒ¼ãƒ‰å–å¾—ã®æœ€é©åŒ–

```javascript
// å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿å–å¾—
const query = 'vendor_code = "V001"';
const fields = ['vendor_name', 'address', 'contact'];
const vendors = await Utils.getRecords(APP_ID, query, fields);
```

---

## 8. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 8.1 ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

#### ã‚¨ãƒ©ãƒ¼: `CONFIG is not defined`

**åŸå› **: `config.js` ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã€ã¾ãŸã¯èª­ã¿è¾¼ã¿é †åºãŒé–“é•ã£ã¦ã„ã‚‹

**å¯¾å‡¦æ³•**:
1. `config.js` ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. `config.js` ãŒæœ€åˆã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢

#### ã‚¨ãƒ©ãƒ¼: `Cannot read property 'value' of null`

**åŸå› **: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã€ã¾ãŸã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå­˜åœ¨ã—ãªã„

**å¯¾å‡¦æ³•**:
1. `config.js` ã® `FIELD_IDS` ã‚’ç¢ºèª
2. ã‚¢ãƒ—ãƒªè¨­å®šã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
3. ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª

#### ã‚¨ãƒ©ãƒ¼: `kintone.Promise.all is not a function`

**åŸå› **: kintone JavaScript API ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„

**å¯¾å‡¦æ³•**:
1. `Promise.all()` ã‚’æ¨™æº–ã® `Promise.all()` ã«å¤‰æ›´
2. ã¾ãŸã¯ `async/await` ã‚’ä½¿ç”¨

#### ã‚¨ãƒ©ãƒ¼: `Quota exceeded`

**åŸå› **: ãƒ¬ã‚³ãƒ¼ãƒ‰å–å¾—ã®ä¸Šé™ (500ä»¶) ã‚’è¶…ãˆã¦ã„ã‚‹

**å¯¾å‡¦æ³•**:
```javascript
// ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’ä½¿ã£ã¦åˆ†å‰²å–å¾—
async function getAllRecords(appId, query) {
  let allRecords = [];
  let offset = 0;
  const limit = 500;
  
  while (true) {
    const records = await kintone.api(
      kintone.api.url('/k/v1/records', true),
      'GET',
      {
        app: appId,
        query: `${query} limit ${limit} offset ${offset}`
      }
    );
    
    if (records.records.length === 0) break;
    
    allRecords = allRecords.concat(records.records);
    offset += limit;
  }
  
  return allRecords;
}
```

### 8.2 ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã®æ´»ç”¨

```javascript
// config.js ã§ DEBUG = true ã«ã™ã‚‹
if (CONFIG.DEBUG) {
  console.log('[ç™ºæ³¨ç®¡ç†] ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿:', MasterData.items);
  console.log('[ç™ºæ³¨ç®¡ç†] ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿:', recordData);
}
```

#### ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã®ä½¿ç”¨

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ F12 ã‚­ãƒ¼ã‚’æŠ¼ã™
2. ã€ŒSourcesã€ã‚¿ãƒ–ã‚’é–‹ã
3. è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
4. è¡Œç•ªå·ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®š
5. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œã‚’åœæ­¢

#### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª

1. F12 â†’ ã€ŒNetworkã€ã‚¿ãƒ–
2. XHR ãƒ•ã‚£ãƒ«ã‚¿ã‚’æœ‰åŠ¹åŒ–
3. API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹ã‚’ç¢ºèª
   - URL
   - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹

### 8.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

#### ç—‡çŠ¶: ãƒšãƒ¼ã‚¸è¡¨ç¤ºãŒé…ã„

**åŸå› **: ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«æ™‚é–“ãŒã‹ã‹ã‚‹

**å¯¾å‡¦æ³•**:
- ãƒã‚¹ã‚¿ã‚¢ãƒ—ãƒªã®ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ã‚’ç¢ºèª (æ•°åƒä»¶ä»¥ä¸Šã®å ´åˆã¯æ³¨æ„)
- å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿å–å¾—
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å°å…¥

#### ç—‡çŠ¶: ãƒ¬ã‚³ãƒ¼ãƒ‰ç™»éŒ²ãŒé…ã„

**åŸå› **: ERPãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡Œæ•°ãŒå¤šã™ãã‚‹

**å¯¾å‡¦æ³•**:
- æ˜ç´°è¡Œæ•°ã‚’æ¸›ã‚‰ã™
- æ¡ˆä»¶é…åˆ†ã®æ•°ã‚’æ¸›ã‚‰ã™
- ãƒãƒƒãƒå‡¦ç†ã‚’æ¤œè¨

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

### æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ

- **æ‹…å½“è€…**: [æ‹…å½“è€…å]
- **ãƒ¡ãƒ¼ãƒ«**: [ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹]
- **Slack**: [ãƒãƒ£ãƒ³ãƒãƒ«å]

### ç·Šæ€¥é€£çµ¡å…ˆ

- **24æ™‚é–“å¯¾å¿œ**: [é›»è©±ç•ªå·]

---

## ğŸ“ æ”¹è¨‚å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|-----------|------|---------|-------|
| 1.0 | 2026-02-14 | åˆç‰ˆä½œæˆ | - |

---

**Â© 2026 kintone ç™ºæ³¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ . All Rights Reserved.**
